<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>WingBend ‚Äî Mark-Free Forming (JA/EN)</title>
  <meta name="description" content="WingBend / WingBend Plus ‚Äî V-die system for mark-free forming. Short flanges, near-hole bending, tapered edges. Catalog download with lead capture." />
  <link rel="icon" href="images/tsh.png" />
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Open Graph -->
  <meta property="og:title" content="WingBend ‚Äî Mark-Free Forming" />
  <meta property="og:description" content="Beautiful outer radii and short flanges with minimal marking. Download the catalog (JA/EN)." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://example.com/wingbend" />
  <meta property="og:image" content="images/AB_WingbendMA_EN.png" />

  <style>.modal-open{overflow:hidden}.btn-wa{position:fixed;right:16px;bottom:16px}</style>
</head>
<body class="min-h-screen bg-gradient-to-b from-slate-50 to-white text-slate-800">
  <!-- ===== CONFIG ===== -->
  <script>
    // PDF katalog (letakkan file-nya di /downloads)
    const CATALOG_URL = "downloads/e catalog.pdf";

    // Google Form action (punya kamu)
    const GOOGLE_FORM_ACTION = "https://docs.google.com/forms/d/e/1FAIpQLSekZCgIo6G84zigbytNiPlJCD2hHyFmHAdR7aQw8lxKKYfnfw/formResponse";

    // YouTube: URL penuh ATAU ID, dua-duanya didukung
    const YOUTUBE_INPUT = "https://www.youtube.com/watch?v=Jg86i4Kg_QQ";

    // === ENTRY ID dari pre-filled link (punya kamu) ===
    const FIELD_MAP = {
      name:     "entry.231306314",
      company:  "entry.1578264793",
      email:    "entry.1046818384",
      phone:    "entry.1693019043",
      country:  "entry.1510398868",
      language: "entry.1021757773",
      purpose:  "entry.1774453702",
      inquiry:  "entry.242968373",
      topic:    "entry.507514688",
      agree:    "entry.1788381472",

      // Tambah entry ID di bawah ini hanya jika kamu membuat pertanyaannya di Form.
      utm_source:   "",
      utm_medium:   "",
      utm_campaign: "",
      utm_term:     "",
      utm_content:  "",
      page_url:     "",
      user_agent:   "",
    };
    // Nilai checkbox harus sama dengan label opsi di Form
    const CONSENT_VALUE = "Option 1";
  </script>

  <!-- ===== Header ===== -->
  <header class="sticky top-0 z-40 bg-white/80 backdrop-blur border-b">
    <div class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between">
      <a href="https://www.to-hatsu.co.jp/" target="_blank" rel="noreferrer" class="flex items-center gap-3">
        <img src="images/tsh.png" alt="TSH logo" class="w-10 h-10 object-contain" />
        <div class="leading-tight">
          <div class="font-semibold">Tokyo Seimitsu Hatsujo</div>
          <div class="text-xs text-slate-500">to-hatsu.co.jp</div>
        </div>
      </a>

      <nav class="hidden md:flex items-center gap-6 text-sm">
        <a href="#about" class="hover:opacity-80" data-i18n="nav.about">About</a>
        <a href="#features" class="hover:opacity-80" data-i18n="nav.features">Key Features</a>
        <a href="#series" class="hover:opacity-80" data-i18n="nav.series">WB Series</a>
        <a href="#video" class="hover:opacity-80" data-i18n="nav.video">Video</a>
        <a href="#how" class="hover:opacity-80" data-i18n="nav.how">How to Order</a>
        <a href="#download" class="hover:opacity-80" data-i18n="nav.download">Download</a>
      </nav>

      <div class="flex items-center gap-2">
        <a href="https://wa.me/818021409299" target="_blank"
           class="rounded-2xl border px-3 py-2 text-sm inline-flex items-center gap-2">
          <img src="images/wa.png" alt="WhatsApp" class="w-4 h-4 object-contain" />
          <span data-i18n="common.whatsapp">WhatsApp</span>
        </a>
        <select id="langSelect" class="border rounded-xl px-3 py-2 text-sm">
          <option value="auto">üåê Auto</option>
          <option value="en">üá¨üáß English</option>
          <option value="ja">üáØüáµ Êó•Êú¨Ë™û</option>
        </select>
        <button id="openModal" class="rounded-2xl bg-slate-900 text-white px-4 py-2 text-sm">
          <span data-i18n="cta.download">Download Catalog</span>
        </button>
      </div>
    </div>
  </header>

  <!-- ===== Hero ===== -->
  <section class="max-w-6xl mx-auto px-4 py-16 grid md:grid-cols-2 gap-10 items-center">
    <div>
      <h1 class="text-4xl md:text-5xl font-bold tracking-tight leading-tight" data-i18n="hero.title">
        Redefining Mark-Free Forming with WingBend
      </h1>
      <p class="mt-4 text-lg text-slate-600" data-i18n="hero.subtitle">
        Achieve beautiful outer radii and short flanges with minimal marking ‚Äî even near holes, tapered edges, and patterned plates.
      </p>
      <div class="mt-6 flex flex-wrap gap-3">
        <button id="openModal2" class="rounded-2xl bg-slate-900 text-white px-5 py-3 text-base">
          ‚¨á <span data-i18n="cta.download">Download Catalog</span>
        </button>
        <a href="https://www.to-hatsu.co.jp/" target="_blank" class="inline-flex items-center px-5 py-3 rounded-2xl border hover:shadow">
          üåê <span class="ml-2" data-i18n="about.website">Website</span>
        </a>
      </div>
      <div class="mt-6 flex items-center gap-2 text-sm text-slate-500">
        ‚úÖ <span data-i18n="hero.trust">Trusted by precision fabricators worldwide.</span>
      </div>
    </div>
    <div class="relative">
      <div class="aspect-[4/3] rounded-3xl bg-gradient-to-br from-slate-200 to-slate-100 shadow-inner grid place-items-center">
        <div class="text-center p-8">
          <div class="text-6xl">üõ†Ô∏è</div>
          <p class="mt-3 text-slate-600" data-i18n="hero.imageCaption">WingBend / WingBend Plus tool concept</p>
        </div>
      </div>
      <div class="absolute -bottom-4 -right-4 bg-white border rounded-2xl shadow p-3 text-xs">
        <div class="font-medium">EN / JA</div>
        <div class="text-slate-500" data-i18n="badges.markFree">Mark-free bending</div>
      </div>
    </div>
  </section>

  <!-- ===== About ===== -->
  <section id="about" class="max-w-6xl mx-auto px-4 py-10">
    <div class="grid md:grid-cols-3 gap-6">
      <div class="rounded-2xl border bg-white p-6">
        <h3 class="font-semibold text-lg" data-i18n="about.title">What is WingBend?</h3>
        <p class="mt-2 text-slate-600" data-i18n="about.copy">
          WingBend and WingBend Plus are V-die systems that minimize surface marks while enabling short flanges, consistent angles, and excellent repeatability.
        </p>
      </div>

      <div class="rounded-2xl border bg-white p-6">
        <h3 class="font-semibold text-lg" data-i18n="about.company">Company</h3>
        <div class="mt-2 text-slate-600 space-y-1">
          <div data-i18n="about.companyName">Tokyo Seimitsu Hatsujo Co., Ltd.</div>
          <div data-i18n="about.location">Yokohama, Japan</div>
          <div>info@to-hatsu.co.jp</div>
          <div>+81-45-624-9841</div>
        </div>
      </div>

      <div class="rounded-2xl border bg-white p-6">
        <h3 class="font-semibold text-lg" data-i18n="about.links">Links</h3>
        <div class="mt-2 text-slate-600 space-y-2">
          <a class="underline inline-flex items-center gap-2" href="https://www.to-hatsu.co.jp/" target="_blank" rel="noreferrer">
            üåê <span data-i18n="about.website">Website</span>
          </a>
          <div class="text-sm text-slate-500 inline-flex items-center gap-2">
            <img src="images/wa.png" alt="WhatsApp" class="w-3.5 h-3.5 object-contain" />
            <span>WhatsApp: +81 802 140 9299</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== Features ===== -->
  <section id="features" class="max-w-6xl mx-auto px-4 py-10">
    <h2 class="text-2xl font-semibold mb-6" data-i18n="features.title">Key Features</h2>
    <div class="grid md:grid-cols-3 gap-6">
      <div class="rounded-2xl border bg-white p-6">
        <div class="font-medium" data-i18n="features.items.0.title">Minimal marking</div>
        <p class="text-slate-600 mt-2 text-sm" data-i18n="features.items.0.body">Mark-free finish on visible surfaces ‚Äî no rework.</p>
      </div>
      <div class="rounded-2xl border bg-white p-6">
        <div class="font-medium" data-i18n="features.items.1.title">Near-feature bending</div>
        <p class="text-slate-600 mt-2 text-sm" data-i18n="features.items.1.body">Bend close to holes and edges with stable flanges and exact angles.</p>
      </div>
      <div class="rounded-2xl border bg-white p-6">
        <div class="font-medium" data-i18n="features.items.2.title">Flexible applications</div>
        <p class="text-slate-600 mt-2 text-sm" data-i18n="features.items.2.body">Ideal for diagonal/tapered bends and chequer plates with consistent quality.</p>
      </div>
    </div>
  </section>

  <!-- ===== Series ===== -->
  <section id="series" class="max-w-6xl mx-auto px-4 py-10">
    <h2 class="text-2xl font-semibold mb-6" data-i18n="series.title">WB Series</h2>
    <div class="grid md:grid-cols-3 gap-6">
      <div class="rounded-2xl border bg-white p-6">
        <div class="text-sm text-slate-500" data-i18n="series.labels.standard">STANDARD</div>
        <div class="font-semibold text-lg mt-1">WB120 / WBP120</div>
        <div class="text-sm mt-1">500 kN/m</div>
        <div class="text-sm text-slate-600"><span data-i18n="series.labels.dieLength">Die Length</span> 50/100/200/500 mm</div>
        <div class="text-sm text-slate-600"><span data-i18n="series.labels.materialThickness">Material thickness</span> 0.3 ‚Äì 1.2 mm</div>
      </div>

      <div class="rounded-2xl border bg-white p-6">
        <div class="text-sm text-slate-500" data-i18n="series.labels.standard">STANDARD</div>
        <div class="font-semibold text-lg mt-1">WB230 / WBP230</div>
        <div class="text-sm mt-1">700 kN/m</div>
        <div class="text-sm text-slate-600"><span data-i18n="series.labels.dieLength">Die Length</span> 50/100/200/500 mm</div>
        <div class="text-sm text-slate-600"><span data-i18n="series.labels.materialThickness">Material thickness</span> 0.3 ‚Äì 2.3 mm</div>
      </div>

      <div class="rounded-2xl border bg-white p-6">
        <div class="text-sm text-slate-500" data-i18n="series.labels.standard">STANDARD</div>
        <div class="font-semibold text-lg mt-1">WB350 / WBP350</div>
        <div class="text-sm mt-1">1000 kN/m</div>
        <div class="text-sm text-slate-600"><span data-i18n="series.labels.dieLength">Die Length</span> 50/100/200/500 mm</div>
        <div class="text-sm text-slate-600"><span data-i18n="series.labels.materialThickness">Material thickness</span> 0.5 ‚Äì 3.2 mm</div>
      </div>

      <div class="rounded-2xl border bg-white p-6">
        <div class="text-sm text-slate-500" data-i18n="series.labels.heavy">HEAVY</div>
        <div class="font-semibold text-lg mt-1">WB650S / WBP650S</div>
        <div class="text-sm mt-1">1500 kN/m</div>
        <div class="text-sm text-slate-600"><span data-i18n="series.labels.dieLength">Die Length</span> 50/100/200/500 mm</div>
        <div class="text-sm text-slate-600"><span data-i18n="series.labels.materialThickness">Material thickness</span> 1.2 ‚Äì 6.5 mm</div>
      </div>

      <div class="rounded-2xl border bg-white p-6">
        <div class="text-sm text-slate-500" data-i18n="series.labels.heavy">HEAVY</div>
        <div class="font-semibold text-lg mt-1">WB950 / WBP950</div>
        <div class="text-sm mt-1">2000 kN/m</div>
        <div class="text-sm text-slate-600"><span data-i18n="series.labels.dieLength">Die Length</span> 100/200 mm</div>
        <div class="text-sm text-slate-600"><span data-i18n="series.labels.materialThickness">Material thickness</span> 6.5 ‚Äì 9.5 mm</div>
      </div>
    </div>
  </section>

  <!-- ===== VIDEO ===== -->
  <section id="video" class="max-w-6xl mx-auto px-4 py-10">
    <h2 class="text-2xl font-semibold mb-4" data-i18n="video.title">WingBend Video / Simulation</h2>
    <div class="grid md:grid-cols-2 gap-6 items-start">
      <video controls class="w-full rounded-2xl border bg-black" poster="images/AB_WingbendMA_EN.png">
        <source src="videos/wingbend.mp4" type="video/mp4" />
        Your browser does not support the video tag.
      </video>

      <div id="ytWrap" class="w-full aspect-video rounded-2xl border overflow-hidden hidden">
        <iframe id="ytIframe" width="560" height="315" src="" title="WingBend Video" frameborder="0"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
      </div>
    </div>
    <p class="text-sm text-slate-500 mt-2" data-i18n="video.note">
      Upload file <code>videos/wingbend.mp4</code> atau set <code>YOUTUBE</code> di bagian CONFIG.
    </p>
  </section>

  <!-- ===== How to Order ===== -->
  <section id="how" class="max-w-6xl mx-auto px-4 py-10">
    <h2 class="text-2xl font-semibold mb-6" data-i18n="how.title">How to Order</h2>
    <ol class="grid gap-4 md:grid-cols-3 list-decimal list-inside">
      <li class="bg-white rounded-2xl border p-5 shadow-sm text-slate-700" data-i18n="how.steps.0">
        Share sheet specs (material, thickness, width, batch rate).
      </li>
      <li class="bg-white rounded-2xl border p-5 shadow-sm text-slate-700" data-i18n="how.steps.1">
        We recommend the optimal WingBend model and slider.
      </li>
      <li class="bg-white rounded-2xl border p-5 shadow-sm text-slate-700" data-i18n="how.steps.2">
        Confirm quotation & delivery, then place PO.
      </li>
    </ol>
  </section>

  <!-- ===== Download CTA ===== -->
  <section id="download" class="max-w-6xl mx-auto px-4 py-10">
    <div class="bg-slate-900 rounded-3xl text-white p-8 md:p-10 flex flex-col md:flex-row items-center justify-between gap-6">
      <div>
        <div class="text-2xl font-semibold" data-i18n="download.title">Download the WingBend Catalog</div>
        <div class="text-slate-300 mt-1" data-i18n="download.copy">Fill in your details to receive the PDF instantly.</div>
      </div>
      <button id="openModal3" class="rounded-2xl bg-white text-slate-900 px-5 py-3 text-base">
        üìÑ <span data-i18n="cta.download">Download Catalog</span>
      </button>
    </div>
    <p class="text-xs text-slate-500 mt-3 flex items-start gap-2">
      üîí <span data-i18n="privacy.note">Your info is used to fulfill your request and relevant product updates. You can opt out anytime.</span>
    </p>
  </section>

  <!-- ===== Footer ===== -->
  <footer class="border-t mt-12">
    <div class="max-w-6xl mx-auto px-4 py-8 text-sm text-slate-500 flex flex-col md:flex-row items-center justify-between gap-3">
      <div>¬© <span id="year"></span> Tokyo Seimitsu Hatsujo Co., Ltd. ‚Ä¢
        <a class="underline" href="https://www.to-hatsu.co.jp/" target="_blank" rel="noreferrer">to-hatsu.co.jp</a>
      </div>
      <div class="flex items-center gap-4">
        <a href="https://wa.me/818021409299" target="_blank" class="hover:opacity-80 inline-flex items-center gap-2">
          <img src="images/wa.png" alt="WhatsApp" class="w-3.5 h-3.5 object-contain" />
          <span data-i18n="common.whatsapp">WhatsApp</span>
        </a>
        <span>Design by Wahyu</span>
      </div>
    </div>
  </footer>

  <!-- Floating WhatsApp -->
  <a href="https://wa.me/818021409299" target="_blank"
     class="btn-wa inline-flex items-center gap-2 rounded-full bg-green-500 text-white px-4 py-2 shadow-lg">
    <img src="images/wa.png" alt="WhatsApp" class="w-4 h-4 object-contain" />
    <span>WhatsApp</span>
  </a>

  <!-- ===== Modal (Form) ===== -->
  <div id="modal" class="fixed inset-0 z-50 hidden">
    <div class="absolute inset-0 bg-black/40" data-close="1"></div>
    <div class="relative max-w-2xl mx-auto mt-16 bg-white rounded-2xl p-6 shadow-lg">
      <div class="flex items-center justify-between mb-3">
        <div class="text-xl font-semibold" data-i18n="form.title">Before downloading ‚Äî tell us about you</div>
        <button class="text-slate-500 hover:text-slate-700" data-close="1">‚úñ</button>
      </div>
      <div class="text-slate-600 mb-4" data-i18n="form.subtitle">We‚Äôll send you the latest catalog and product tips.</div>

      <!-- optional iframe (hanya untuk debug=1) -->
      <iframe name="hidden_iframe" id="hidden_iframe" style="display:none;"></iframe>

      <form id="leadForm" class="grid grid-cols-1 md:grid-cols-2 gap-4" method="POST" target="hidden_iframe">
        <div><label class="text-sm" data-i18n="form.name">Full name</label><input class="w-full border rounded-xl px-3 py-2" required id="f_name" /></div>
        <div><label class="text-sm" data-i18n="form.company">Company</label><input class="w-full border rounded-xl px-3 py-2" required id="f_company" /></div>
        <div><label class="text-sm" data-i18n="form.email">Email</label><input class="w-full border rounded-xl px-3 py-2" type="email" required id="f_email" /></div>
        <div><label class="text-sm" data-i18n="form.phone">Phone</label><input class="w-full border rounded-xl px-3 py-2" id="f_phone" /></div>
        <div><label class="text-sm" data-i18n="form.country">Country/Region</label><input class="w-full border rounded-xl px-3 py-2" required id="f_country" /></div>
        <div><label class="text-sm" data-i18n="form.language">Preferred language</label>
          <!-- VALUE harus cocok dengan label opsi di Form -->
          <select class="w-full border rounded-xl px-3 py-2" id="f_language">
            <option value="English">English</option>
            <option value="Êó•Êú¨Ë™û">Êó•Êú¨Ë™û</option>
          </select>
        </div>
        <div class="md:col-span-2"><label class="text-sm" data-i18n="form.purpose">Project details or interest (optional)</label>
          <textarea class="w-full border rounded-xl px-3 py-2" rows="3" id="f_purpose"></textarea>
        </div>
        <div>
          <label class="text-sm" data-i18n="form.faqLabel">FAQ Topic (optional)</label>
          <select class="w-full border rounded-xl px-3 py-2" id="f_topic">
            <option value="">‚Äî</option>
            <option value="Pricing / Quotation" data-i18n="form.faqOptions.pricing">Pricing / Quotation</option>
            <option value="Compatibility & Press" data-i18n="form.faqOptions.compatibility">Compatibility & Press</option>
            <option value="Material / Thickness" data-i18n="form.faqOptions.material">Material / Thickness</option>
            <option value="Custom size / Special" data-i18n="form.faqOptions.custom">Custom size / Special</option>
            <option value="Delivery / Lead time" data-i18n="form.faqOptions.delivery">Delivery / Lead time</option>
            <option value="Other" data-i18n="form.faqOptions.other">Other</option>
          </select>
        </div>
        <div><label class="text-sm" data-i18n="form.question">Inquiry (optional)</label><input class="w-full border rounded-xl px-3 py-2" id="f_inquiry" /></div>

        <div class="md:col-span-2 flex items-start gap-2 text-sm">
          <input id="f_agree" type="checkbox" class="mt-1" required />
          <label for="f_agree" class="text-slate-600" data-i18n="form.consent">
            I agree to receive product updates and communications related to WingBend (you can unsubscribe at any time).
          </label>
        </div>

        <!-- Hidden UTM + context -->
        <input type="hidden" id="f_utm_source" />
        <input type="hidden" id="f_utm_medium" />
        <input type="hidden" id="f_utm_campaign" />
        <input type="hidden" id="f_utm_term" />
        <input type="hidden" id="f_utm_content" />
        <input type="hidden" id="f_page_url" />
        <input type="hidden" id="f_user_agent" />

        <!-- penting untuk beberapa Form -->
        <input type="hidden" name="submit" value="Submit" />

        <div class="md:col-span-2 flex justify-end gap-3 mt-2">
          <button type="button" class="px-4 py-2 rounded-xl border" data-close="1" data-i18n="form.cancel">Cancel</button>
          <button type="submit" class="px-4 py-2 rounded-xl bg-slate-900 text-white" id="submitBtn">
            <span data-i18n="form.submit">Get Catalog</span>
          </button>
        </div>

        <div class="md:col-span-2 text-sm mt-2 hidden" id="successNote">
          ‚úÖ <span data-i18n="form.success">Thanks! Your download will start. If not, use the link below.</span>
          <div class="mt-1"><a class="underline" href="#" id="fallbackLink">Download manually</a></div>
        </div>
      </form>
    </div>
  </div>

  <noscript><div class="max-w-6xl mx-auto p-4 text-red-600">This page requires JavaScript to submit the form and start the download.</div></noscript>

  <!-- ===== JS (i18n + form + youtube + fetch submit) ===== -->
  <script>
    const $=(s,r=document)=>r.querySelector(s), $$=(s,r=document)=>Array.from(r.querySelectorAll(s));
    const translations = {
      en: { common:{whatsapp:"WhatsApp"}, nav:{about:"About",features:"Key Features",series:"WB Series",video:"Video",how:"How to Order",download:"Download"},
        cta:{download:"Download Catalog",how:"How to Order"},
        hero:{title:"Redefining Mark-Free Forming with WingBend",subtitle:"Achieve beautiful outer radii and short flanges with minimal marking ‚Äî even near holes, tapered edges, and patterned plates.",trust:"Trusted by precision fabricators worldwide.",imageCaption:"WingBend / WingBend Plus tool concept"},
        badges:{markFree:"Mark-free bending"},
        about:{title:"What is WingBend?",copy:"WingBend and WingBend Plus are V-die systems that minimize surface marks while enabling short flanges, consistent angles, and excellent repeatability.",company:"Company",links:"Links",website:"Website",companyName:"Tokyo Seimitsu Hatsujo Co., Ltd.",location:"Yokohama, Japan"},
        features:{title:"Key Features",items:[{title:"Minimal marking",body:"Mark-free finish on visible surfaces ‚Äî no rework."},{title:"Near-feature bending",body:"Bend close to holes and edges with stable flanges and exact angles."},{title:"Flexible applications",body:"Ideal for diagonal/tapered bends and chequer plates with consistent quality."}]},
        series:{title:"WB Series",labels:{standard:"STANDARD",heavy:"HEAVY",dieLength:"Die Length",materialThickness:"Material thickness"}},
        video:{title:"WingBend Video / Simulation",note:"Upload videos/wingbend.mp4 or set YouTube above."},
        how:{title:"How to Order",steps:["Share sheet specs (material, thickness, width, batch rate).","We recommend the optimal WingBend model and slider.","Confirm quotation & delivery, then place PO."]},
        download:{title:"Download the WingBend Catalog",copy:"Fill in your details to receive the PDF instantly."},
        privacy:{note:"Your info is used to fulfill your request and relevant product updates. You can opt out anytime."},
        form:{title:"Before downloading ‚Äî tell us about you",subtitle:"We‚Äôll send you the latest catalog and product tips.",name:"Full name",company:"Company",email:"Email",phone:"Phone",country:"Country/Region",language:"Preferred language",purpose:"Project details or interest (optional)",question:"Inquiry (optional)",faqLabel:"FAQ Topic (optional)",faqOptions:{pricing:"Pricing / Quotation",compatibility:"Compatibility & Press",material:"Material / Thickness",custom:"Custom size / Special",delivery:"Delivery / Lead time",other:"Other"},consent:"I agree to receive product updates and communications related to WingBend (you can unsubscribe at any time).",submit:"Get Catalog",cancel:"Cancel",success:"Thanks! Your download will start. If not, use the link below."}
      },
      ja: { common:{whatsapp:"WhatsApp"}, nav:{about:"Ê¶ÇË¶Å",features:"ÁâπÈï∑",series:"WB„Ç∑„É™„Éº„Ç∫",video:"ÂãïÁîª",how:"Ê≥®ÊñáÊñπÊ≥ï",download:"„Ç´„Çø„É≠„Ç∞"},
        cta:{download:"„Ç´„Çø„É≠„Ç∞„Çí„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ",how:"Ê≥®ÊñáÊñπÊ≥ï"},
        hero:{title:"WingBend„Åß‚Äú„Ç≠„Ç∫„Å™„ÅóÊõ≤„Åí‚Äù„Çí„Çπ„Çø„É≥„ÉÄ„Éº„Éâ„Å´",subtitle:"Á©¥„ÇÑÁ´ØÈÉ®„Å´Ëøë„ÅÑÊõ≤„Åí„ÄÅ„ÉÜ„Éº„Éë„Éº„ÄÅÁ∏ûÊùø„Åß„ÇÇ„ÄÅÁæé„Åó„ÅÑÂ§ñR„Å®Áü≠„ÅÑ„Éï„É©„É≥„Ç∏„ÇíÂÆâÂÆö„Åó„Å¶ÂÆüÁèæ„Åó„Åæ„Åô„ÄÇ",trust:"ÂõΩÂÜÖÂ§ñ„ÅÆÁ≤æÂØÜÊùøÈáë„É°„Éº„Ç´„Éº„ÅßÊé°Áî®„ÅåÈÄ≤„Çì„Åß„ÅÑ„Åæ„Åô„ÄÇ",imageCaption:"WingBend / WingBend Plus „ÅÆ„Ç≥„É≥„Çª„Éó„Éà"},
        badges:{markFree:"„Ç≠„Ç∫„Å™„ÅóÊõ≤„Åí"},
        about:{title:"WingBend„Å®„ÅØ",copy:"WingBendÔºèWingBend Plus „ÅØ„ÄÅÁü≠„ÅÑ„Éï„É©„É≥„Ç∏„ÉªÊ≠£Á¢∫„Å™ËßíÂ∫¶„ÉªÈ´ò„ÅÑÂÜçÁèæÊÄß„Çí‰øù„Å°„Å™„Åå„Çâ„ÄÅÁõÆË¶ñÈù¢„ÅÆ„Ç≠„Ç∫„ÇíÊäë„Åà„ÇãV„ÉÄ„Ç§„Ç∑„Çπ„ÉÜ„É†„Åß„Åô„ÄÇ",company:"‰ºöÁ§æÊÉÖÂ†±",links:"„É™„É≥„ÇØ",website:"Web„Çµ„Ç§„Éà",companyName:"Êù±‰∫¨Á≤æÂØÜÁô∫Êù°Ê†™Âºè‰ºöÁ§æ",location:"Êó•Êú¨„ÉªÊ®™Êµú"},
        features:{title:"‰∏ª„Å™ÁâπÈï∑",items:[{title:"ÁõÆË¶ñÈù¢„ÅÆ„Ç≠„Ç∫„ÇíÊäëÂà∂",body:"Â§ñË¶≥ÈÉ®ÂìÅ„Åß„ÇÇÂæåÂá¶ÁêÜ„ÇíÊúÄÂ∞èÂåñ„Åß„Åç„Åæ„Åô„ÄÇ"},{title:"Á©¥„ÉªÁ∏Å„Å´Ëøë„ÅÑÊõ≤„Åí",body:"Á©¥„ÇÑÁ´ØÈÉ®„ÅÆËøëÂÇç„Åß„ÇÇÂÆâÂÆö„Åó„Åü„Éï„É©„É≥„Ç∏„Å®ËßíÂ∫¶„ÇíÁ¢∫‰øù„ÄÇ"},{title:"ÂπÖÂ∫É„ÅÑÈÅ©Áî®",body:"Êñú„ÇÅ„Éª„ÉÜ„Éº„Éë„Éº„ÉªÁ∏ûÊùø„Å™„Å©Èõ£Á¥†Êùê„Åß„ÇÇÂùá‰∏Ä„Å™ÂìÅË≥™„ÇíÂÆüÁèæ„ÄÇ"}]},
        series:{title:"WB„Ç∑„É™„Éº„Ç∫",labels:{standard:"STANDARD",heavy:"HEAVY",dieLength:"„ÉÄ„Ç§Èï∑„Åï",materialThickness:"ÊùøÂéö"}},
        video:{title:"WingBend ÂãïÁîªÔºè„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥",note:"videos/wingbend.mp4 „ÇíÈÖçÁΩÆ„Åô„Çã„Åã„ÄÅ‰∏äÈÉ®„ÅÆ YouTube „ÇíË®≠ÂÆö„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ"},
        how:{title:"„ÅîÊ≥®Êñá„ÅÆÊµÅ„Çå",steps:["ÊùêË≥™„ÉªÊùøÂéö„ÉªÊùøÂπÖ„Éª„É≠„ÉÉ„ÉàÁ≠â„ÅÆ‰ªïÊßò„Çí„ÅîÂÖ±Êúâ„Åè„Å†„Åï„ÅÑ„ÄÇ","ÊúÄÈÅ©„Å™ WingBend Ê©üÁ®Æ„Å®„Çπ„É©„Ç§„ÉÄ„Éº„Çí„ÅîÊèêÊ°à„Åó„Åæ„Åô„ÄÇ","„ÅäË¶ãÁ©ç„Çä„ÉªÁ¥çÊúüÁ¢∫ÂÆöÂæå„Å´„ÅîÁô∫Ê≥®„Åè„Å†„Åï„ÅÑ„ÄÇ"]},
        download:{title:"WingBend Á∑èÂêà„Ç´„Çø„É≠„Ç∞",copy:"ÂøÖË¶Å‰∫ãÈ†Ö„Çí„ÅîÂÖ•Âäõ„ÅÑ„Åü„Å†„Åè„Å®„ÄÅPDF „Çí„Åô„Åê„Å´„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ„Åß„Åç„Åæ„Åô„ÄÇ"},
        privacy:{note:"„ÅîÊèê‰æõ„ÅÑ„Åü„Å†„ÅÑ„ÅüÊÉÖÂ†±„ÅØË≥áÊñôÈÄÅ‰ªò„Åä„Çà„Å≥Èñ¢ÈÄ£Ë£ΩÂìÅ„ÅÆ„ÅîÊ°àÂÜÖ„Å´„ÅÆ„ÅøÂà©Áî®„Åó„Åæ„Åô„ÄÇÈÖç‰ø°ÂÅúÊ≠¢„ÅØ„ÅÑ„Å§„Åß„ÇÇÂèØËÉΩ„Åß„Åô„ÄÇ"},
        form:{title:"„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ„ÅÆÂâç„Å´ ‚Äî „ÅîÈÄ£Áµ°ÂÖà",subtitle:"ÊúÄÊñ∞Áâà„Ç´„Çø„É≠„Ç∞„Å®Ê¥ªÁî®„Éí„É≥„Éà„Çí„ÅäÈÄÅ„Çä„Åó„Åæ„Åô„ÄÇ",name:"Ê∞èÂêç",company:"‰ºöÁ§æÂêç",email:"„É°„Éº„É´",phone:"ÈõªË©±Áï™Âè∑",country:"ÂõΩÔºèÂú∞Âüü",language:"Â∏åÊúõË®ÄË™û",purpose:"Ê°à‰ª∂ÂÜÖÂÆπ„Éª„ÅîÈñ¢ÂøÉÔºà‰ªªÊÑèÔºâ",question:"„ÅäÂïè„ÅÑÂêà„Çè„ÅõÂÜÖÂÆπÔºà‰ªªÊÑèÔºâ",faqLabel:"FAQ„Éà„Éî„ÉÉ„ÇØÔºà‰ªªÊÑèÔºâ",faqOptions:{pricing:"‰æ°Ê†º„ÉªÂæ°Ë¶ãÁ©ç",compatibility:"‰∫íÊèõÊÄß„Éª„Éó„É¨„Çπ",material:"ÊùêË≥™„ÉªÊùøÂéö",custom:"ÁâπÊ≥®„Çµ„Ç§„Ç∫„ÉªÁâπÂûã",delivery:"Á¥çÊúü",other:"„Åù„ÅÆ‰ªñ"},consent:"WingBend „Å´Èñ¢„Åô„Çã„ÅäÁü•„Çâ„Åõ„ÅÆÂèó‰ø°„Å´ÂêåÊÑè„Åó„Åæ„ÅôÔºà„ÅÑ„Å§„Åß„ÇÇÈÖç‰ø°ÂÅúÊ≠¢ÂèØÔºâ„ÄÇ",submit:"„Ç´„Çø„É≠„Ç∞„ÇíÂèñÂæó",cancel:"„Ç≠„É£„É≥„Çª„É´",success:"„ÅÇ„Çä„Åå„Å®„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åô„ÄÇ„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ„ÅåÈñãÂßã„Åó„Åæ„Åô„ÄÇÈñãÂßã„Åó„Å™„ÅÑÂ†¥Âêà„ÅØ‰∏ã„ÅÆ„É™„É≥„ÇØ„Çí„ÇØ„É™„ÉÉ„ÇØ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ"}
      }
    };

    const modal=$("#modal"), openers=["#openModal","#openModal2","#openModal3"].map(id=>$(id)), year=$("#year"), langSelect=$("#langSelect"), leadForm=$("#leadForm"), hiddenIframe=$("#hidden_iframe"), successNote=$("#successNote"), fallbackLink=$("#fallbackLink");

    function resolveLang(pref){ if(pref!=="auto") return pref; const n=navigator.language||(navigator.languages&&navigator.languages[0])||"en"; return n.toLowerCase().startsWith("ja")?"ja":"en"; }
    function applyI18n(lang){
      const t=translations[lang];
      $$("[data-i18n]").forEach(el=>{
        const keys=el.getAttribute("data-i18n").split(".");
        let cur=t; for(const k of keys) cur=cur?.[k];
        if(typeof cur==="string") el.textContent=cur;
      });
      // Pastikan value yang dikirim cocok dengan opsi Form
      if ($("#f_language")) { $("#f_language").value = (lang==='ja') ? 'Êó•Êú¨Ë™û' : 'English'; }
    }

    function openModal(){ modal.classList.remove("hidden"); document.documentElement.classList.add("modal-open"); }
    function closeModal(){ modal.classList.add("hidden"); document.documentElement.classList.remove("modal-open"); }
    modal.addEventListener("click",(e)=>{ if(e.target.dataset.close) closeModal(); });
    openers.forEach(b=>b&&b.addEventListener("click",openModal));

    year.textContent=new Date().getFullYear();
    const savedLang=localStorage.getItem("wb_lang")||"auto";
    langSelect.value=savedLang;
    const activeLang=resolveLang(savedLang);
    applyI18n(activeLang);

    langSelect.addEventListener("change",()=>{ const pref=langSelect.value; localStorage.setItem("wb_lang",pref); applyI18n(resolveLang(pref)); });

    // ===== YouTube: dukung URL & ID =====
    function normalizeYouTubeId(input){
      if(!input) return "";
      try{
        const u=new URL(input);
        if(u.hostname.includes("youtu.be")) return u.pathname.replace("/","");
        if(u.hostname.includes("youtube.com")) return u.searchParams.get("v")||"";
      }catch(e){ /* input bukan URL, asumsikan ID */ }
      return input;
    }
    (function mountYouTube(){
      const id = normalizeYouTubeId(YOUTUBE_INPUT);
      if(!id) return;
      const wrap=$("#ytWrap"), ifr=$("#ytIframe");
      ifr.src=`https://www.youtube.com/embed/${id}`;
      wrap.classList.remove("hidden");
    })();

    // ===== UTM & context =====
    function getParam(n){ const u=new URL(location.href); return u.searchParams.get(n)||""; }
    function fillHidden(){
      const set=(id,v)=>{$(id).value=v};
      set("#f_utm_source",getParam("utm_source"));
      set("#f_utm_medium",getParam("utm_medium"));
      set("#f_utm_campaign",getParam("utm_campaign"));
      set("#f_utm_term",getParam("utm_term"));
      set("#f_utm_content",getParam("utm_content"));
      set("#f_page_url",location.href);
      set("#f_user_agent",navigator.userAgent);
    }
    fillHidden();

    // ===== Map ke Google Form =====
    function mapField(el, entry){ if (el && entry) el.setAttribute("name", entry); }
    function mountForm(){
      leadForm.setAttribute("action", GOOGLE_FORM_ACTION);

      mapField($("#f_name"),FIELD_MAP.name);
      mapField($("#f_company"),FIELD_MAP.company);
      mapField($("#f_email"),FIELD_MAP.email);
      mapField($("#f_phone"),FIELD_MAP.phone);
      mapField($("#f_country"),FIELD_MAP.country);
      mapField($("#f_language"),FIELD_MAP.language);
      mapField($("#f_purpose"),FIELD_MAP.purpose);
      mapField($("#f_topic"),FIELD_MAP.topic);
      mapField($("#f_inquiry"),FIELD_MAP.inquiry);

      // consent
      $("#f_agree").setAttribute("name", FIELD_MAP.agree);

      // hidden context (isi entry ID kalau pertanyaannya ada di Form)
      mapField($("#f_utm_source"),FIELD_MAP.utm_source);
      mapField($("#f_utm_medium"),FIELD_MAP.utm_medium);
      mapField($("#f_utm_campaign"),FIELD_MAP.utm_campaign);
      mapField($("#f_utm_term"),FIELD_MAP.utm_term);
      mapField($("#f_utm_content"),FIELD_MAP.utm_content);
      mapField($("#f_page_url"),FIELD_MAP.page_url);
      mapField($("#f_user_agent"),FIELD_MAP.user_agent);

      $("#fallbackLink").setAttribute("href", encodeURI(CATALOG_URL));

      // mode debug: tampilkan halaman "Thanks" Google Form
      if (getParam('debug') === '1') { leadForm.removeAttribute('target'); }
    }
    mountForm();

    // --- helper download ---
    function startDownload(){
      const a=document.createElement("a");
      a.href=encodeURI(CATALOG_URL);
      a.download="";
      document.body.appendChild(a);
      a.click();
      a.remove();
    }

    // kirim via fetch no-cors agar stabil
    async function sendToGoogleForm(){
      // set nilai consent & language agar match label di Form
      const agreeEl = $("#f_agree");
      if (agreeEl && agreeEl.checked) agreeEl.value = CONSENT_VALUE;

      const langEl = $("#f_language");
      if (langEl) langEl.value = (langEl.value==='Êó•Êú¨Ë™û' || langEl.value==='ja') ? 'Êó•Êú¨Ë™û' : 'English';

      const fd = new FormData(leadForm);
      try {
        await fetch(GOOGLE_FORM_ACTION, { method:'POST', mode:'no-cors', body: fd });
      } catch(e) { console.warn('Submit error (ignored due to no-cors):', e); }
    }

    // submit handler baru
    (function attachSubmit(){
      const debug = getParam('debug') === '1';
      leadForm.addEventListener('submit', async (ev)=>{
        if (debug) return; // biar lihat halaman "Thanks" Google
        ev.preventDefault();
        await sendToGoogleForm();
        $("#successNote").classList.remove("hidden");
        startDownload();
      }, { passive:false });
    })();
  </script>
</body>
</html>
